CREATE TABLE Zones (
id_zone INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(255)
);

CREATE TABLE Sellers (
id_seller INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(255),
email VARCHAR(255),
pwd VARCHAR(255)
);

INSERT INTO Sellers (name) VALUES ('Pagina Web');

CREATE TABLE Users (
id_user INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
email VARCHAR(255),
pwd VARCHAR(255),
name VARCHAR(255),
lastname VARCHAR(255),
tel1 VARCHAR(31),
tel2 VARCHAR(31),
dir VARCHAR(255),
id_seller INT UNSIGNED,
FOREIGN KEY (id_seller) REFERENCES Sellers (id_seller)
ON UPDATE CASCADE 
ON DELETE SET NULL
);


CREATE TABLE Dogs (
id_dog INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(255),
breed VARCHAR(255),
age TINYINT(2),
cat TINYINT(2),
reg_date TIMESTAMP,
id_zone INT UNSIGNED,
FOREIGN KEY (id_zone) REFERENCES Zones (id_zone)
ON UPDATE CASCADE 
ON DELETE SET NULL,
id_user INT UNSIGNED,
FOREIGN KEY (id_user) REFERENCES Users (id_user)
ON UPDATE CASCADE 
ON DELETE CASCADE
);

CREATE TABLE Pics (
id_pic INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
dir VARCHAR(255),
id_dog INT UNSIGNED,
FOREIGN KEY (id_dog) REFERENCES Dogs (id_dog)
ON UPDATE CASCADE 
ON DELETE SET NULL
);

ALTER TABLE Pics Add caption VARCHAR(255); 
ALTER TABLE Pics Add created DATETIME; 

CREATE TABLE Likes (
id_pic INT UNSIGNED,
FOREIGN KEY (id_pic) REFERENCES Pics (id_pic)
ON UPDATE CASCADE 
ON DELETE SET NULL,
id_user INT UNSIGNED,
FOREIGN KEY (id_user) REFERENCES Users (id_user)
ON UPDATE CASCADE 
ON DELETE CASCADE
);

CREATE TABLE Matchs (
id_match INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
msj VARCHAR(255),
id_dog1 INT UNSIGNED,
FOREIGN KEY (id_dog1) REFERENCES Dogs (id_dog)
ON UPDATE CASCADE 
ON DELETE SET NULL,
id_dog2 INT UNSIGNED,
FOREIGN KEY (id_dog2) REFERENCES Dogs (id_dog)
ON UPDATE CASCADE 
ON DELETE SET NULL
);
